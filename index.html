<html lang="en">
    <head>

      <!--jquery js-->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
      <!-- leaflet files -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css" />
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js"></script>

      <!--jQuery UI files-->
      <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" />
      <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js" integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30=" crossorigin="anonymous"></script>
      <!--jQuery UI Touch js, required for touchscreen use-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>

      <!--Leaflet Time-Slider plugin js;
      find maintained version at https://github.com/geyerbri/LeafletSlider-->
      <script src="js/SliderControl.js"></script>

    </head>

    <style>
    body{
        margin: 0
    }
    #myMap {
        width: 100%;
        height: 100%;
    }
    </style>

    <body>

      <div id="myMap">If you can read this, either an error has occurred, or you're getting cute with the developer tools of your browser.</div>

      <script >
    // Create map (map1) inside div with #myMap ID; set the view
    var map1 = L.map('myMap').setView([46.26,-119.15], 12);

    // Add tileLayer to map1
    L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
    }).addTo(map1);

            var dataset1 = [
        {
            type: 'Feature',
            geometry: {
                type: 'Point',
                coordinates: [-119.0977191, 46.2465524]
            },
            properties: {
                title: 'Popup 1',
                description: 'Hello World!',
                time: '1992/01'
            }
        },
        {
            type: 'Feature',
            geometry: {
                type: 'Point',
                coordinates: [-119.201977, -46.257038]
            },
            properties: {
                title: 'Popup 2',
                description: 'Hello again, World!',
                time: '1992/07'
            }
        },
        {
            type: 'Feature',
            geometry: {
                type: 'Point',
                coordinates: [-119.1080419, 46.2309332]
            },
            properties: {
                title: 'Popup 3',
                description: 'Hello once again, World!',
                time: '1992/06'
            }
        }
        ];

                  var optionsObject = {
              onEachFeature: onEachFeature
          };
          function onEachFeature (feature, layer) {
              var content = "<div style='clear: both'></div><div><h4>" + feature.properties.title + "</h4><p>" + feature.properties.time + "</p><p>" + feature.properties.description + "</p></div>";
              layer.bindPopup(content, {closeButton: true});
          };
          var group1 = L.geoJSON(dataset1, optionsObject);

          $.getJSON("data/popups.json", function(json) {
            var group2 = L.geoJSON(json, optionsObject);

            group1.options.time = "1992";
            group2.options.time = "1993";
            var multiLayers = L.layerGroup([group1, group2]);

          var sliderControl1 = L.control.sliderControl( {
                layer: multiLayers, // REQUIRED
                alwaysShowDate: true, // to make the date box below the slider persistent
                showAllPopups: false, // to show all popups, instead of only one; same as the popup option "autoClose: false"
                showPopups: false // to set it so, when a marker is generated by the slider, its popup doesn't automatically display
            });

            // Add the slider to the map
            map1.addControl(sliderControl1);

            // Initialize the slider
            sliderControl1.startSlider();

            sliderControl1.startSlider();

          });

      </script>

    </body>
</html>
